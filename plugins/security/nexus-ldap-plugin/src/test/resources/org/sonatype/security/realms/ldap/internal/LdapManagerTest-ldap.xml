<?xml version="1.0" encoding="UTF-8"?>
<ldapConfiguration>
  <version>2.0.1</version>
  <servers>
  
  <server>
      <id>default</id>
      <name>ldap://localhost:${default-ldap-port}</name>
      <connectionInfo>
        <searchBase>o=sonatype</searchBase>
        <systemUsername>uid=admin,ou=system</systemUsername>
        <systemPassword>secret</systemPassword>
        <authScheme>simple</authScheme>
        <protocol>ldap</protocol>
        <host>localhost</host>
        <port>${default-ldap-port}</port>
        <connectionRetryDelay>300</connectionRetryDelay>
        <cacheTimeout>30</cacheTimeout>
      </connectionInfo>
      <userAndGroupConfig>
        <emailAddressAttribute>mail</emailAddressAttribute>
        <ldapGroupsAsRoles>true</ldapGroupsAsRoles>
        <groupBaseDn>ou=groups</groupBaseDn>
        <groupIdAttribute>cn</groupIdAttribute>
        <userMemberOfAttribute>businesscategory</userMemberOfAttribute>
        <groupMemberFormat>cn=${username},ou=groups,o=sonatype</groupMemberFormat>
        <groupObjectClass>organizationalRole</groupObjectClass>
        <userPasswordAttribute>userPassword</userPasswordAttribute>
        <preferredPasswordEncoding>clear</preferredPasswordEncoding>
        <userIdAttribute>uid</userIdAttribute>
        <userObjectClass>inetOrgPerson</userObjectClass>
        <userBaseDn>ou=people</userBaseDn>
        <userRealNameAttribute>sn</userRealNameAttribute>
      </userAndGroupConfig>
    </server>
  
    <server>
      <id>invalid</id>
      <name>ldap://invalidhostname:12345</name>
      <connectionInfo>
        <searchBase>o=sonatype</searchBase>
        <systemUsername>uid=admin,ou=system</systemUsername>
        <systemPassword>CMw7ArkDsKp4yvV0M1yl</systemPassword>
        <authScheme>simple</authScheme>
        <protocol>ldap</protocol>
        <host>invalidhostname</host>
        <port>12345</port>
        <connectionRetryDelay>300</connectionRetryDelay>
        <cacheTimeout>30</cacheTimeout>
      </connectionInfo>
      <userAndGroupConfig>
        <emailAddressAttribute>mail</emailAddressAttribute>
        <ldapGroupsAsRoles>true</ldapGroupsAsRoles>
        <groupBaseDn>ou=groups</groupBaseDn>
        <groupIdAttribute>cn</groupIdAttribute>
        <groupMemberAttribute>uniqueMember</groupMemberAttribute>
        <groupMemberFormat>uid=${username},ou=people,o=sonatype</groupMemberFormat>
        <groupObjectClass>organizationalRole</groupObjectClass>
        <userPasswordAttribute>userPassword</userPasswordAttribute>
        <preferredPasswordEncoding>clear</preferredPasswordEncoding>
        <userIdAttribute>uid</userIdAttribute>
        <userObjectClass>inetOrgPerson</userObjectClass>
        <userBaseDn>ou=people</userBaseDn>
        <userRealNameAttribute>sn</userRealNameAttribute>
      </userAndGroupConfig>
    </server>

    <server>
      <id>second</id>
      <name>ldap://localhost:${second-ldap-port}</name>
      <connectionInfo>
        <searchBase>o=sonatype</searchBase>
        <systemUsername>uid=admin,ou=system</systemUsername>
        <systemPassword>secret</systemPassword>
        <authScheme>simple</authScheme>
        <protocol>ldap</protocol>
        <host>localhost</host>
        <port>${second-ldap-port}</port>
        <connectionRetryDelay>300</connectionRetryDelay>
        <cacheTimeout>30</cacheTimeout>
      </connectionInfo>
      <userAndGroupConfig>
        <emailAddressAttribute>mail</emailAddressAttribute>
        <ldapGroupsAsRoles>true</ldapGroupsAsRoles>
        <groupBaseDn>ou=groups</groupBaseDn>
        <groupIdAttribute>cn</groupIdAttribute>
        <userMemberOfAttribute>businesscategory</userMemberOfAttribute>
        <groupMemberFormat>cn=${username},ou=groups,o=sonatype</groupMemberFormat>
        <groupObjectClass>organizationalRole</groupObjectClass>
        <userPasswordAttribute>userPassword</userPasswordAttribute>
        <preferredPasswordEncoding>clear</preferredPasswordEncoding>
        <userIdAttribute>uid</userIdAttribute>
        <userObjectClass>inetOrgPerson</userObjectClass>
        <userBaseDn>ou=people</userBaseDn>
        <userRealNameAttribute>sn</userRealNameAttribute>
      </userAndGroupConfig>
    </server>
    
        
    <server>
      <id>backup</id>
      <name>ldap://localhost:${backup-ldap-port}</name>
      <connectionInfo>
        <searchBase>o=sonatype</searchBase>
        <systemUsername>uid=admin,ou=system</systemUsername>
        <systemPassword>secret</systemPassword>
        <authScheme>simple</authScheme>
        <protocol>ldap</protocol>
        <host>invalidHostName</host>
        <port>${backup-ldap-port}</port>
        
        <backupMirrorHost>localhost</backupMirrorHost>
        <backupMirrorProtocol>ldap</backupMirrorProtocol>
        <backupMirrorPort>${backup-ldap-port}</backupMirrorPort>
        
        <connectionRetryDelay>300</connectionRetryDelay>
        <cacheTimeout>30</cacheTimeout>
      </connectionInfo>
      <userAndGroupConfig>
        <groupMemberFormat>uid=${username},ou=people,o=sonatype</groupMemberFormat>
        <groupObjectClass>groupOfUniqueNames</groupObjectClass>
        <groupBaseDn>ou=groups</groupBaseDn>
        <groupIdAttribute>cn</groupIdAttribute>
        <groupMemberAttribute>uniqueMember</groupMemberAttribute>
        <userObjectClass>inetOrgPerson</userObjectClass>
        <userBaseDn>ou=people</userBaseDn>
        <userIdAttribute>uid</userIdAttribute>
        <userPasswordAttribute>userPassword</userPasswordAttribute>
        <userRealNameAttribute>sn</userRealNameAttribute>
        <emailAddressAttribute>mail</emailAddressAttribute>
        <preferredPasswordEncoding>clear</preferredPasswordEncoding>
        <userSubtree>false</userSubtree>
        <ldapGroupsAsRoles>true</ldapGroupsAsRoles>
      </userAndGroupConfig>
    </server>
    
    
  </servers>
</ldapConfiguration>
